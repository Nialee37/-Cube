@model ServiceDAL.BusinessObjet.Personne
@using Microsoft.AspNetCore.Http
@using System.Text.Json
@{
    ViewData["Title"] = "View";
}

<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="Edit" method="POST">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        
                <input asp-for="Id" class="form-control" value="@Model.Id" type="hidden" />
             
            <div class="form-group">
                <label asp-for="Nom" class="control-label"></label>
                <input asp-for="Nom" class="form-control" value="@Model.Nom" />
                <span asp-validation-for="Nom" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Prenom" class="control-label"></label>
                <input asp-for="Prenom" class="form-control" value="@Model.Prenom" />
                <span asp-validation-for="Prenom" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="DateNaissance" class="control-label"></label>
                <input asp-for="DateNaissance" class="form-control" value="@Model.DateNaissance.ToString("yyyy/MM-dd").Replace('/','-')" />
                <span asp-validation-for="DateNaissance" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Genre" class="control-label"></label>
                <input asp-for="Genre" class="form-control" value="@Model.Genre"/>
                <span asp-validation-for="Genre" class="text-danger"></span>
            </div>
            @*MDP A VOIR APRES*@
           
                <input asp-for="PasswordHash" type="hidden" class="form-control" />
          

            <div class="form-group">
                <label asp-for="Mail" class="control-label"></label>
                <input asp-for="Mail" class="form-control" value="@Model.Mail" />
                <span asp-validation-for="Mail" class="text-danger"></span>
            </div>
          
                <input asp-for="IdAdresse" class="form-control" value="@Model.IdAdresse" type="hidden" />
          
               
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-primary" />
            </div>
               @{
         Personne user = Context.Session.GetString("user") != null ? JsonSerializer.Deserialize<Personne>(Context.Session.GetString("user")) : null;
    }
            @{if(user != null && (user.Roles.Libelle == "Administrateur" || user.Roles.Libelle == "SuperAdministrateur" ))
        {
               <div class="form-group">
                <label asp-for="IdRoles" class="control-label"></label>
                <input asp-for="IdRoles" class="form-control" value="@Model.IdRoles" />
                <span asp-validation-for="IdRoles" class="text-danger"></span>
            </div>
        }}
                  
        </form>
    </div>
</div>
