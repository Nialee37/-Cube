<p>Page accueil mes ressources</p>

<a target="_blank" href="/Ressource/Create">Créé une ressource</a>

<p>Vos ressources</p>
<div id="container">


</div>

<script> //js pour appeler la fonction en ajax "Mesressources"

$(document).ready(function(){
    $.ajax({
        //L'URL de la requête 
        url: "Ressource/Mesressources",

        //La méthode d'envoi (type de requête)
        method: "GET",

        //Le format de réponse attendu
        dataType : "json",
    })
    //Ce code sera exécuté en cas de succès - La réponse du serveur est passée à done()
    /*On peut par exemple convertir cette réponse en chaine JSON et insérer
     * cette chaine dans un div id="res"*/
    .done(function(response){
        //let data = JSON.stringify(response);
        let data = response;
        console.log(data);
      var divinsert = document.getElementById("container");

        for (var i = 0; i < data.length; i++) {
          
      var a = document.createElement('a');
      var linkText = document.createTextNode(data[i].nom);
      a.appendChild(linkText);
      a.title = data[i].nom;
      a.href = "/Ressource/GetRessource?Id=" + data[i].Id;
      document.body.appendChild(a);
}
        
    })
    
    //Ce code sera exécuté en cas d'échec - L'erreur est passée à fail()
    //On peut afficher les informations relatives à la requête et à l'erreur
    .fail(function(error){
        alert("La requête s'est terminée en échec. Infos : " + JSON.stringify(error));
    })

    //Ce code sera exécuté que la requête soit un succès ou un échec
    });
</script>